在 Electron 项目中，创建补丁而不是每次都进行完整的发版自动更新，是一种更加灵活的更新策略，特别是当你只需要修复小的 bug 或者进行局部的功能调整时。这种方式能让你避免每次都进行完整的版本发布，节省资源并加快迭代速度。

### 如何在 Electron 中实现补丁更新

实现补丁的核心目的是通过最小化更新包来减小用户下载的体积，并且只更新发生变化的部分。

#### 1. 使用 **Electron-Updater** + **Delta 更新**(不详细介绍)

**`electron-updater`** 是 Electron 中非常常用的自动更新工具，它支持增量更新（Delta Update）。增量更新可以确保只更新有变化的部分，从而避免每次都发布完整的新版本。

- **增量更新**：增量更新是补丁更新的最佳方式，利用类似 `diff` 的技术，只下载和安装有变化的文件（而不是整个应用包）。这样能有效地减小更新包的体积。

#### 2. 使用 **`patch-package`**（针对 `node_modules` 中的补丁）

针对一些第三方库或代码中的小问题进行补丁更新，`patch-package` 这个工具会非常有用。它允许你对 `node_modules` 中的依赖包进行修改，并将这些修改打包为补丁（`.patch` 文件），然后应用到下次构建中。

`patch-package` 不是专门的 npm 技术，它是一个独立的开源工具，可以与 npm 或 yarn 配合使用。`patch-package` 允许开发者在不修改第三方包源代码的情况下，对项目中的依赖包进行补丁修复（patch）。这种方式使得在某些依赖包存在问题时，能够快速进行本地修复，而不需要等待官方发布更新。

##### 步骤：

1. 安装 `patch-package`：
   
   ```bash
   npm install patch-package
   ```

2. 在 `package.json` 中配置 `postinstall` 脚本，以确保补丁应用到项目中。

   ```json
   "scripts": {
     "postinstall": "patch-package"
   }
   ```

3. 修改某个依赖库文件后，使用以下命令生成补丁：

   ```bash
   npx patch-package <package-name>
   ```

4. 在下次安装依赖时，`patch-package` 会自动应用这些补丁。

   这种方式适用于那些在开发过程中需要快速修复某些第三方库的问题，并且不想每次都发布完整的版本。
   

#### 3. **手动管理补丁文件**（适用于自定义模块或代码）

如果你的项目中有一些自定义模块或特定的代码修改，你可以通过手动方式管理补丁。比如：
- 将需要更新的代码模块提取成独立的补丁包。
- 使用 `rsync` 或类似工具将代码的差异部分传输到用户端。
- 用户应用补丁后，通过程序重新加载或重新启动应用。

这种方法适用于需要特别控制和定制化的补丁更新过程，但会增加维护成本。

